{"ast":null,"code":"import _defineProperty from \"/Users/johncunningham/Desktop/Spring 2019/CIDM4385-Mobile-App-Dev/CIDM4385/assignment3/pizza-bandit/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/johncunningham/Desktop/Spring 2019/CIDM4385-Mobile-App-Dev/CIDM4385/assignment3/pizza-bandit/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/johncunningham/Desktop/Spring 2019/CIDM4385-Mobile-App-Dev/CIDM4385/assignment3/pizza-bandit/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/johncunningham/Desktop/Spring 2019/CIDM4385-Mobile-App-Dev/CIDM4385/assignment3/pizza-bandit/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/johncunningham/Desktop/Spring 2019/CIDM4385-Mobile-App-Dev/CIDM4385/assignment3/pizza-bandit/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/johncunningham/Desktop/Spring 2019/CIDM4385-Mobile-App-Dev/CIDM4385/assignment3/pizza-bandit/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/johncunningham/Desktop/Spring 2019/CIDM4385-Mobile-App-Dev/CIDM4385/assignment3/pizza-bandit/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport Home from './components/home';\nimport Header from './components/header';\nimport Footer from './components/footer';\nimport firebase from './Services/Firebase';\nimport SignInForm from './components/signin/signinForm';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      email: '',\n      password: '',\n      userAuthenticated: false,\n      formErrors: {\n        email: '',\n        password: '',\n        errors: ''\n      },\n      emailValid: false,\n      passwordValid: false,\n      formValid: false,\n      formresults: '',\n      mapstyle: 'light',\n      lat: '',\n      lng: '',\n      geolocerror: '',\n      user: {},\n      orders: {\n        date: '',\n        email: '',\n        item: '',\n        price: '',\n        vendor: ''\n      },\n      cards: {\n        className: 'btn btn-primary',\n        selected: false,\n        name: 'Add to Cart',\n        item: ''\n      }\n    };\n\n    _this.handleUserInput = function (e) {\n      var name = e.target.name;\n      var value = e.target.value;\n      return _this.setState(_defineProperty({}, name, value), function () {\n        _this.validateField(name, value);\n      });\n    };\n\n    _this.handleClick = function (e) {\n      e.preventDefault();\n\n      var formresults = \"Email: \" + _this.state.email.toLowerCase();\n\n      _this.setState({\n        formresults: formresults\n      });\n    };\n\n    _this.handleLoginFormSubmission = function (e) {\n      _this.handleClick(e);\n\n      firebase.auth().signInWithEmailAndPassword(_this.state.email, _this.state.password).then(function () {\n        _this.setState({\n          formErrors: {\n            errors: ''\n          }\n        });\n      }).catch(function (error) {\n        _this.setErrorMessage(error);\n      });\n    };\n\n    _this.handleLogout = function () {\n      firebase.auth().signOut(); // this.setState({\n      //   formErrors: { errors: '' }\n      // });\n    };\n\n    _this.changeButtonClass = function () {\n      var selected = _this.state.selected;\n      var className = selected ? 'btn btn-success' : 'btn btn-primary';\n      var name = selected ? 'Added' : 'Add to Cart';\n\n      _this.setState({\n        className: className,\n        name: name\n      });\n    };\n\n    _this.handleCardClick = function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        selected: !_this.state.selected\n      }, function () {\n        _this.changeButtonClass();\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.authListener();\n    }\n  }, {\n    key: \"authListener\",\n    value: function authListener() {\n      var _this2 = this;\n\n      firebase.auth().onAuthStateChanged(function (user) {\n        user ? _this2.setState({\n          user: {\n            userAuthenticated: true,\n            email: user.email\n          }\n        }) : _this2.setState({\n          user: ''\n        });\n      });\n    }\n  }, {\n    key: \"validateField\",\n    value: function validateField(fieldName, value) {\n      var fieldValidationErrors = this.state.formErrors;\n      var emailValid = this.state.emailValid;\n      var passwordValid = this.state.passwordValid;\n      var emailRegex = new RegExp(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);\n      var mediumRegex = new RegExp(\"^(?=.*[A-Z])(?=.*[0-9])(?=.{8,})\");\n\n      switch (fieldName) {\n        case 'email':\n          emailValid = value.match(emailRegex);\n          fieldValidationErrors.email = emailValid ? '' : ' invalid email';\n          break;\n\n        case 'password':\n          passwordValid = value.match(mediumRegex);\n          fieldValidationErrors.password = passwordValid ? '' : ' needs 8 characters or more, at least 1 number, and one capitalized letter';\n          break;\n\n        default:\n          break;\n      }\n\n      this.setState({\n        formErrors: fieldValidationErrors,\n        emailValid: emailValid,\n        passwordValid: passwordValid\n      }, this.validateForm);\n    }\n  }, {\n    key: \"validateForm\",\n    value: function validateForm() {\n      this.setState({\n        formValid: this.state.emailValid && this.state.passwordValid\n      });\n    }\n  }, {\n    key: \"setErrorMessage\",\n    value: function setErrorMessage(error) {\n      var errMessage = error.message;\n      this.setState({\n        formErrors: {\n          errors: errMessage\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          formErrors = _this$state.formErrors,\n          user = _this$state.user,\n          cards = _this$state.cards;\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(Header, {\n        user: user,\n        logout: this.handleLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), !user ? React.createElement(SignInForm, {\n        onChange: this.handleUserInput,\n        onClick: this.handleLoginFormSubmission,\n        log: formErrors,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }) : React.createElement(Home, {\n        onChange: this.handleUserInput,\n        log: formErrors,\n        cards: cards,\n        onCardClick: this.handleCardClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), React.createElement(Footer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/johncunningham/Desktop/Spring 2019/CIDM4385-Mobile-App-Dev/CIDM4385/assignment3/pizza-bandit/src/App.js"],"names":["React","Component","Home","Header","Footer","firebase","SignInForm","App","state","email","password","userAuthenticated","formErrors","errors","emailValid","passwordValid","formValid","formresults","mapstyle","lat","lng","geolocerror","user","orders","date","item","price","vendor","cards","className","selected","name","handleUserInput","e","target","value","setState","validateField","handleClick","preventDefault","toLowerCase","handleLoginFormSubmission","auth","signInWithEmailAndPassword","then","catch","error","setErrorMessage","handleLogout","signOut","changeButtonClass","handleCardClick","authListener","onAuthStateChanged","fieldName","fieldValidationErrors","emailRegex","RegExp","mediumRegex","match","validateForm","errMessage","message"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport Home from './components/home';\nimport Header from './components/header';\nimport Footer from './components/footer';\nimport firebase from './Services/Firebase';\nimport SignInForm from './components/signin/signinForm';\n\nclass App extends Component {\n  state = {\n    email: '',\n    password: '',\n    userAuthenticated: false,\n    formErrors: { email: '', password: '', errors: '' },\n    emailValid: false,\n    passwordValid: false,\n    formValid: false,\n    formresults: '',\n    mapstyle: 'light',\n    lat: '',\n    lng: '',\n    geolocerror: '',\n    user: {},\n    orders: {\n      date: '',\n      email: '',\n      item: '',\n      price: '',\n      vendor: ''\n    },\n    cards: {\n      className: 'btn btn-primary',\n      selected: false,\n      name: 'Add to Cart',\n      item: ''\n    }\n  }\n\n  componentDidMount() {\n    this.authListener();\n  }\n\n  authListener() {\n    firebase.auth().onAuthStateChanged((user) => {\n      (user) ? this.setState({ user: { userAuthenticated: true, email: user.email } }) : this.setState({\n        user: ''\n      });\n    })\n  }\n\n  handleUserInput = (e) => {\n    const name = e.target.name;\n    const value = e.target.value;\n    return this.setState({ [name]: value },\n      () => { this.validateField(name, value) });\n\n  };\n  validateField(fieldName, value) {\n\n    let fieldValidationErrors = this.state.formErrors;\n    let emailValid = this.state.emailValid;\n    let passwordValid = this.state.passwordValid;\n    let emailRegex = new RegExp(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);\n    let mediumRegex = new RegExp(\"^(?=.*[A-Z])(?=.*[0-9])(?=.{8,})\");\n\n    switch (fieldName) {\n      case 'email':\n        emailValid = value.match(emailRegex);\n        fieldValidationErrors.email = emailValid ? '' : ' invalid email';\n        break;\n      case 'password':\n        passwordValid = value.match(mediumRegex);\n        fieldValidationErrors.password = passwordValid ? '' : ' needs 8 characters or more, at least 1 number, and one capitalized letter';\n        break;\n      default:\n        break;\n    }\n    this.setState({\n      formErrors: fieldValidationErrors,\n      emailValid: emailValid,\n      passwordValid: passwordValid\n    }, this.validateForm);\n  }\n\n  validateForm() {\n    this.setState({ formValid: this.state.emailValid && this.state.passwordValid });\n  }\n\n  handleClick = (e) => {\n    e.preventDefault();\n    const formresults = \"Email: \" + this.state.email.toLowerCase();\n    this.setState({ formresults: formresults });\n  }\n\n  handleLoginFormSubmission = (e) => {\n    this.handleClick(e);\n    firebase.auth().signInWithEmailAndPassword(this.state.email, this.state.password)\n      .then(() => {\n        this.setState({\n          formErrors: { errors: '' }\n        });\n      })\n      .catch((error) => { this.setErrorMessage(error) }\n\n      );\n  }\n\n  setErrorMessage(error) {\n    const errMessage = error.message;\n    this.setState({\n      formErrors: { errors: errMessage }\n    });\n  }\n\n  handleLogout = () => {\n    firebase.auth().signOut();\n    // this.setState({\n    //   formErrors: { errors: '' }\n    // });\n  }\n\n  changeButtonClass = () => {\n    let selected = this.state.selected;\n    let className = selected ? 'btn btn-success' : 'btn btn-primary';\n    let name = selected ? 'Added' : 'Add to Cart';\n    this.setState({\n      className,\n      name\n    })\n  }\n\n  handleCardClick = (e) => {\n    e.preventDefault();\n    this.setState({\n      selected: !this.state.selected\n    },\n      () => { this.changeButtonClass() });\n  }\n\n  render() {\n    const { formErrors, user, cards } = this.state;\n    return (\n      <div className=\"App\">\n        <Header user={user}\n          logout={this.handleLogout} />\n        {(!user) ?\n          <SignInForm\n            onChange={this.handleUserInput}\n            onClick={this.handleLoginFormSubmission}\n            log={formErrors} /> :\n          <Home onChange={this.handleUserInput}\n            log={formErrors}\n            cards={cards}\n            onCardClick={this.handleCardClick}\n          />\n        }\n        <Footer />\n      </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}