{"ast":null,"code":"import _classCallCheck from \"/Users/johncunningham/Desktop/Spring 2019/CIDM4385-Mobile-App-Dev/CIDM4385/assignment3/pizza-bandit/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/johncunningham/Desktop/Spring 2019/CIDM4385-Mobile-App-Dev/CIDM4385/assignment3/pizza-bandit/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/johncunningham/Desktop/Spring 2019/CIDM4385-Mobile-App-Dev/CIDM4385/assignment3/pizza-bandit/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/johncunningham/Desktop/Spring 2019/CIDM4385-Mobile-App-Dev/CIDM4385/assignment3/pizza-bandit/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/johncunningham/Desktop/Spring 2019/CIDM4385-Mobile-App-Dev/CIDM4385/assignment3/pizza-bandit/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/johncunningham/Desktop/Spring 2019/CIDM4385-Mobile-App-Dev/CIDM4385/assignment3/pizza-bandit/src/components/map/pizzaPlaces.js\";\nimport React, { Component } from 'react';\nimport PizzaPlace from './pizzaPlace';\nvar component_name = \"Pizza Places: \";\n\nvar PizzaPlaces =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PizzaPlaces, _Component);\n\n  function PizzaPlaces() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PizzaPlaces);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PizzaPlaces)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      pizza_place_list: [],\n      lat: '',\n      lng: ''\n    };\n\n    _this.componentDidMount = function () {\n      var lat = _this.props.lat;\n      var lng = _this.props.lng;\n\n      _this.setState({\n        lat: lat,\n        lng: lng\n      });\n\n      console.log(component_name, \"Lat\" + lat, 'LON: ' + lng);\n    };\n\n    return _this;\n  }\n\n  _createClass(PizzaPlaces, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState, snapshot) {\n      /*so we don't update on every little change, just check to see\n      if lat or lon changed */\n      if (this.props.lat !== prevProps.lat || this.props.lng !== prevProps.lng) {\n        console.log(component_name, \"Previous Lat: \".concat(prevProps.lat, \" and Prevous Lon:\").concat(prevProps.lng));\n        console.log(component_name, \"Current Lat: \".concat(this.props.lat, \" and Current Lon:\").concat(this.props.lng)); //make rest call\n\n        this.getPizzaPlacesFromHereAPI();\n      }\n    }\n  }, {\n    key: \"getPizzaPlacesFromHereAPI\",\n    value: function getPizzaPlacesFromHereAPI() {\n      var _this2 = this;\n\n      var here_api_url = \"https://places.cit.api.here.com/places/v1/autosuggest?\";\n      var here_api_at = \"at=\".concat(this.props.lat, \",\").concat(this.props.lng, \"&\");\n      var here_api_q = \"q=pizza&\";\n      var here_api_app_id = \"app_id=\".concat(process.env.REACT_APP_HERE_API_APP_ID, \"&\");\n      var here_api_app_code = \"app_code=\".concat(process.env.REACT_APP_HERE_API_APP_CODE);\n      console.log(here_api_url + here_api_at + here_api_q + here_api_app_id + here_api_app_code); //the built-in fetch API will make the REST/AJAX call for us: https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch    \n\n      fetch(here_api_url + here_api_at + here_api_q + here_api_app_id + here_api_app_code).then(function (response) {\n        //call HERE API and get returned list\n        return response.json();\n      }) //filter down to response that have locations (lat/lon)\n      .then(function (responseAsJson) {\n        //use the JavaScript filter method - https://www.w3schools.com/jsref/jsref_filter.asp\n        var filtered = responseAsJson.results.filter(function (result) {\n          //this checks to see if this record has a position array\n          return result.position;\n        }); //return the filtered results\n\n        return filtered;\n      }) //receive the promise response returned as a JSON object\n      .then(function (filtered) {\n        _this2.setState(function () {\n          return {\n            pizza_place_list: filtered\n          };\n        });\n\n        return filtered;\n      }).then(function () {\n        var places = _this2.state.pizza_place_list; //get a random pizza place and set the parent state with it            \n\n        if (places.length > 0) {\n          _this2.props.sendRandomPlace(places[Math.floor(Math.random() * places.length)]);\n        }\n\n        _this2.state.pizza_place_list.forEach(function (pizza_place) {// const pizzalocation = pizza_place.title + ' ' +\n          //     pizza_place.vicinity + ' ' +\n          //     pizza_place.category;\n        });\n      }).catch(function (error) {\n        return console.error(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var places = this.state.pizza_place_list;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, this.props.title), React.createElement(\"div\", {\n        className: \"card-columns\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, places.map(function (place) {\n        return React.createElement(PizzaPlace, {\n          key: place.id,\n          placedata: place,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        });\n      })));\n    }\n  }]);\n\n  return PizzaPlaces;\n}(Component);\n\nexport default PizzaPlaces;","map":{"version":3,"sources":["/Users/johncunningham/Desktop/Spring 2019/CIDM4385-Mobile-App-Dev/CIDM4385/assignment3/pizza-bandit/src/components/map/pizzaPlaces.js"],"names":["React","Component","PizzaPlace","component_name","PizzaPlaces","state","pizza_place_list","lat","lng","componentDidMount","props","setState","console","log","prevProps","prevState","snapshot","getPizzaPlacesFromHereAPI","here_api_url","here_api_at","here_api_q","here_api_app_id","process","env","REACT_APP_HERE_API_APP_ID","here_api_app_code","REACT_APP_HERE_API_APP_CODE","fetch","then","response","json","responseAsJson","filtered","results","filter","result","position","places","length","sendRandomPlace","Math","floor","random","forEach","pizza_place","catch","error","title","map","place","id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport PizzaPlace from './pizzaPlace';\n\nlet component_name = \"Pizza Places: \"\n\nclass PizzaPlaces extends Component {\n    state = {\n        pizza_place_list: [],\n        lat: '',\n        lng: ''\n    }\n\n    componentDidMount = () => {\n        let lat = this.props.lat;\n        let lng = this.props.lng;\n        this.setState({\n            lat,\n            lng\n        });\n        console.log(component_name, \"Lat\" + lat, 'LON: ' + lng);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n\n        /*so we don't update on every little change, just check to see\n        if lat or lon changed */\n        if (this.props.lat !== prevProps.lat || this.props.lng !== prevProps.lng) {\n\n            console.log(component_name, `Previous Lat: ${prevProps.lat} and Prevous Lon:${prevProps.lng}`);\n            console.log(component_name, `Current Lat: ${this.props.lat} and Current Lon:${this.props.lng}`);\n\n            //make rest call\n            this.getPizzaPlacesFromHereAPI();\n        }\n\n    }\n\n    getPizzaPlacesFromHereAPI() {\n\n        const here_api_url = \"https://places.cit.api.here.com/places/v1/autosuggest?\";\n        const here_api_at = `at=${this.props.lat},${this.props.lng}&`;\n        const here_api_q = \"q=pizza&\";\n        const here_api_app_id = `app_id=${process.env.REACT_APP_HERE_API_APP_ID}&`;\n        const here_api_app_code = `app_code=${process.env.REACT_APP_HERE_API_APP_CODE}`;\n\n        console.log(here_api_url + here_api_at + here_api_q + here_api_app_id + here_api_app_code);\n\n        //the built-in fetch API will make the REST/AJAX call for us: https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch    \n        fetch(here_api_url + here_api_at + here_api_q + here_api_app_id + here_api_app_code)\n            .then((response) => {\n                //call HERE API and get returned list\n                return response.json();\n            }\n            )\n            //filter down to response that have locations (lat/lon)\n            .then((responseAsJson) => {\n\n                //use the JavaScript filter method - https://www.w3schools.com/jsref/jsref_filter.asp\n                const filtered = responseAsJson.results.filter((result) => {\n                    //this checks to see if this record has a position array\n                    return result.position;\n\n                });\n\n                //return the filtered results\n                return filtered;\n\n            })\n            //receive the promise response returned as a JSON object\n            .then((filtered) => {\n\n                this.setState(() => {\n                    return {\n                        pizza_place_list: filtered,\n                    }\n                }\n                );\n\n                return filtered;\n            })\n            .then(() => {\n\n                const places = this.state.pizza_place_list;\n\n                //get a random pizza place and set the parent state with it            \n                if (places.length > 0) {\n                    this.props.sendRandomPlace(places[Math.floor(Math.random() * places.length)]);\n                }\n\n                this.state.pizza_place_list.forEach((pizza_place) => {\n                    // const pizzalocation = pizza_place.title + ' ' +\n                    //     pizza_place.vicinity + ' ' +\n                    //     pizza_place.category;\n\n                }\n                );\n            })\n            .catch(error => console.error(error));\n    }\n\n    render() {\n\n        const places = this.state.pizza_place_list;\n\n        return (\n            <div>\n                <h1>{this.props.title}</h1>\n                <div className=\"card-columns\">\n                    {places.map((place) =>\n                        <PizzaPlace key={place.id}\n                            placedata={place} />\n                    )}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default PizzaPlaces;"]},"metadata":{},"sourceType":"module"}